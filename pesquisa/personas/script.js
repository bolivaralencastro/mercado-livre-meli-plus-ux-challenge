const data = {
  "personas": [
    {
      "id": "ana_paula_santos",
      "nome": "Ana Paula Santos",
      "role": "A Ca√ßadora de Ofertas Frustrada com Entregas",
      "frase": "Prometeram entregar em 2 dias, mas quando vi o rastreio, o produto nem havia sa√≠do do centro de distribui√ß√£o!",
      "perfil": {
        "Idade": "37 anos",
        "Localiza√ß√£o": "S√£o Paulo (zona sul)",
        "Fam√≠lia": "Casada, 2 filhos (7 e 10 anos)",
        "Forma√ß√£o": "Ensino superior completo",
        "Renda": "R$ 8.000‚Äì12.000/m√™s",
        "Frequ√™ncia": "5‚Äì7 compras/m√™s no ML; assinante MELI+ Total h√° 8 meses"
      },
      "comportamento": [
        "Usa MELI+ para: brinquedos, produtos de casa, eletr√¥nicos pequenos",
        "Cancelou 2x a assinatura nos √∫ltimos 18 meses por problemas de entrega",
        "68% das usu√°rias com perfil semelhante n√£o renovam ap√≥s 2 atrasos consecutivos",
        "Comunica frustra√ß√£o via: WhatsApp (62%), Reclame Aqui (23%), redes sociais (15%)"
      ],
      "dores": [
        "Prazos mentirosos: ‚ÄúFrete gr√°tis em 3 dias‚Äù ‚Üí entrega em 12 dias",
        "Cupons perdidos por cancelamentos autom√°ticos do sistema",
        "Impossibilidade de cancelar antes do envio quando o app est√° inst√°vel",
        "Atendimento fragmentado: ‚ÄúUm fala uma coisa, outro fala outra, e ningu√©m resolve‚Äù"
      ],
      "elogios_valores": {
        "elogios": [
          "‚ÄúOs descontos do MELI+ s√£o reais ‚Äî economizei R$ 220 em fraldas este ano‚Äù",
          "‚ÄúQuando funciona, √© muito mais r√°pido que ir ao supermercado‚Äù"
        ],
        "valores": "Praticidade, economia, confian√ßa, transpar√™ncia"
      },
      "oportunidades": [
        "Notifica√ß√µes proativas com geolocaliza√ß√£o do entregador + ETA atualizado em tempo real",
        "Compensa√ß√£o autom√°tica de R$ 15 em cr√©ditos quando entrega atrasa >24h do prometido",
        "Canal de atendimento priorit√°rio para assinantes MELI+ (tempo m√©dio de resposta <15 min)",
        "Sistema de ‚Äúcupons garantidos‚Äù: se cancelado por falha do ML, o benef√≠cio √© reembolsado automaticamente"
      ],
      "imagem": "ana_paula_santos.webp"
    },
    {
      "id": "ricardo_almeida",
      "nome": "Ricardo Almeida",
      "role": "O Empreendedor V√≠tima de Taxas Ocultas",
      "frase": "Cobraram R$ 47 de ‚Äòtaxa de servi√ßo premium‚Äô sem aviso pr√©vio ‚Äî isso n√£o estava no contrato!",
      "perfil": {
        "Idade": "32 anos",
        "Localiza√ß√£o": "Belo Horizonte",
        "Estado Civil": "Solteiro",
        "Forma√ß√£o": "Administra√ß√£o de Empresas",
        "Renda": "R$ 6.000‚Äì8.000/m√™s (vari√°vel)",
        "Atividade": "Vendedor ocasional (eletr√¥nicos usados) + microconsultor digital"
      },
      "comportamento": [
        "Usa Mercado Pago como conta principal (recebe, paga, investe)",
        "Tem conta no Nubank e PicPay como backup",
        "Avalia ROI de cada transa√ß√£o: compara taxas, prazos de libera√ß√£o e benef√≠cios",
        "55% dos vendedores com perfil semelhante consideram migrar para Shopee em 2025"
      ],
      "dores": [
        "Taxas maiores que o combinado: ‚ÄúAnunciava 12%, mas cobraram 16,5% + R$ 6,75 fixo‚Äù",
        "Frete ‚Äògr√°tis‚Äô que custa caro: ML cobra do vendedor, reduzindo margem",
        "Dashboard financeiro opaco: n√£o mostra lucro l√≠quido estimado antes da venda",
        "Falta de cashback para vendedores fi√©is (enquanto Nubank e PicPay oferecem)"
      ],
      "elogios_valores": {
        "elogios": [
          "‚ÄúO Pix √© imbat√≠vel ‚Äî r√°pido, seguro e sem taxas‚Äù",
          "‚ÄúQuando usei a log√≠stica ML, os prazos foram cumpridos‚Äù"
        ],
        "valores": "Transpar√™ncia, efici√™ncia, rentabilidade, autonomia"
      },
      "oportunidades": [
        "Dashboard de Lucro L√≠quido em Tempo Real com simula√ß√£o antes da publica√ß√£o",
        "Programa ‚ÄúVendedor Leal‚Äù: redu√ß√£o progressiva de taxas (at√© 8%) para quem mant√©m >95% de satisfa√ß√£o por 6 meses",
        "Cashback de 2% em vendas para quem usa 100% da log√≠stica ML",
        "Relat√≥rio mensal de ‚ÄúCusto Total por Venda‚Äù com compara√ß√£o vs. concorrentes"
      ],
      "imagem": "ricardo_almeida.webp"
    },
    {
      "id": "maria_oliveira",
      "nome": "Maria Oliveira",
      "role": "A V√≠tima da Tecnologia que Exclui",
      "frase": "Meu neto teve que vir aqui resolver tudo, porque o aplicativo n√£o deixa eu ver nem o extrato!",
      "perfil": {
        "Idade": "62 anos",
        "Localiza√ß√£o": "Porto Alegre",
        "Situa√ß√£o": "Vi√∫va, 3 filhos adultos",
        "Forma√ß√£o": "Ensino m√©dio completo",
        "Renda": "R$ 3.000‚Äì4.000/m√™s (aposentadoria + pens√£o)",
        "Tecnologia": "Smartphone h√° 14 meses; ajuda dos filhos para atualiza√ß√µes"
      },
      "comportamento": [
        "Usa ML para: presentes, roupas, itens de casa (2‚Äì3x/m√™s)",
        "3,2x mais chances de ter conta suspensa por falha no reconhecimento facial",
        "63% dos usu√°rios 55+ relatam: ‚Äúapp trava ao tentar ver saldo‚Äù",
        "Prefere contato por telefone (78%) ou presencial (15%)"
      ],
      "dores": [
        "Reconhecimento facial n√£o funciona em iPads ou com √≥culos de leitura",
        "Tela branca ao acessar ‚ÄúCart√µes‚Äù ap√≥s atualiza√ß√µes",
        "Suspens√£o de conta sem explica√ß√£o clara",
        "Interface muda demais ‚Äî ‚Äún√£o consigo mais achar nada‚Äù"
      ],
      "elogios_valores": {
        "elogios": [
          "‚ÄúO Pix para meus netos √© maravilhoso ‚Äî r√°pido e sem burocracia‚Äù",
          "‚ÄúQuando o atendente √© paciente, me sinto segura‚Äù"
        ],
        "valores": "Seguran√ßa, simplicidade, respeito, apoio humano"
      },
      "oportunidades": [
        "Modo ‚ÄúSenior‚Äù com fonte aumentada, bot√µes maiores e navega√ß√£o linear",
        "Central Telef√¥nica Dedicada (linha direta, sem URA)",
        "V√≠deos tutoriais em portugu√™s claro (narrados por voz feminina, 60+ anos)",
        "Atendimento presencial em parceria com redes de farm√°cias"
      ],
      "imagem": "maria_oliveira.webp"
    },
    {
      "id": "gabriel_ferreira",
      "nome": "Gabriel Ferreira",
      "role": "O Influenciador Digital que Exige Integra√ß√£o",
      "frase": "Por que preciso de 3 apps diferentes para usar o que deveria estar tudo no Mercado Pago?",
      "perfil": {
        "Idade": "26 anos",
        "Localiza√ß√£o": "Rio de Janeiro",
        "Forma√ß√£o": "Tecnologia da Informa√ß√£o",
        "Renda": "R$ 5.000‚Äì7.000/m√™s",
        "Dispositivos": "iPhone 15 Pro, Apple Watch, Macbook Air",
        "Servi√ßos": "MELI+ Mega, Nubank, PicPay, Spotify, Apple One"
      },
      "comportamento": [
        "Usu√°rio di√°rio de 4‚Äì5 apps financeiros",
        "89% dos usu√°rios 20‚Äì30 com iPhone exigem Apple Pay",
        "74% pagariam 20% a mais na assinatura por integra√ß√£o total com Apple",
        "Cancela servi√ßos em <48h ap√≥s experi√™ncia frustante"
      ],
      "dores": [
        "‚ÄúApple Pay ou nada!‚Äù ‚Äî principal motivo de churn entre jovens premium",
        "Muita biometria: at√© 5 solicita√ß√µes por sess√£o",
        "MELI+ Mega n√£o inclui YouTube Premium (principal motivo de cancelamento)",
        "App trava ap√≥s atualiza√ß√µes ‚Äî ‚Äúa √∫ltima atualiza√ß√£o estragou tudo‚Äù"
      ],
      "elogios_valores": {
        "elogios": [
          "‚ÄúO cashback √© bom, mas poderia ser melhor‚Äù",
          "‚ÄúGosto da ideia do MELI+ ‚Äî s√≥ falta entregar direito‚Äù"
        ],
        "valores": "Integra√ß√£o, performance, eleg√¢ncia t√©cnica, status digital"
      },
      "oportunidades": [
        "Integra√ß√£o oficial com Apple Pay + NFC no cart√£o f√≠sico",
        "Benef√≠cios ‚Äú√† la carte‚Äù no MELI+: usu√°rio escolhe 2 ou 3 streamings",
        "Modo Escuro nativo + UX Apple-style (gestos, anima√ß√µes, feedback t√°til)",
        "Suporte t√©cnico em tempo real via chat para problemas de streaming"
      ],
      "imagem": "gabriel_ferreira.webp"
    },
    {
      "id": "thiago_rocha",
      "nome": "Thiago Rocha",
      "role": "O Vendedor que Busca Fugir das Taxas",
      "frase": "Taxa de 18% para produtos com margem de 25% √© invi√°vel. Estou indo pra Shopee.",
      "perfil": {
        "Idade": "29 anos",
        "Localiza√ß√£o": "Fortaleza",
        "Atividade": "Microempreendedor (artigos de pesca, acess√≥rios para celular)",
        "Renda": "R$ 3.500‚Äì9.000/m√™s (vari√°vel)",
        "Marketplaces": "ML (60%), Instagram (30%), Shopee (10% e crescendo)"
      },
      "comportamento": [
        "Vende acess√≥rios e pequenos produtos",
        "Sens√≠vel a taxas e custos log√≠sticos",
        "Concorr√™ncia asi√°tica oferece cashback + log√≠stica mais barata"
      ],
      "dores": [
        "Taxas n√£o competitivas: Shopee cobra 10‚Äì12%, ML cobra 16‚Äì18%",
        "Frete ‚Äúgr√°tis‚Äù reduz margem: ‚ÄúO cliente acha que √© de gra√ßa, mas eu pago R$ 22‚Äù",
        "Falta de analytics avan√ßados para ajuste de pre√ßo e estoque"
      ],
      "elogios_valores": {
        "elogios": [],
        "valores": "Rentabilidade, competitividade, baixo custo"
      },
      "oportunidades": [
        "Programa ‚ÄúVendedor Leal‚Äù com taxas progressivas",
        "Ferramenta de ‚ÄúC√°lculo de Lucro L√≠quido‚Äù integrada ao an√∫ncio",
        "Log√≠stica ML com pre√ßo competitivo para categorias de baixa margem",
        "Cashback por volume: R$ 0,50 a cada R$ 100 em vendas com log√≠stica pr√≥pria"
      ],
      "imagem": "thiago_rocha.webp"
    },
    {
      "id": "camila_lima",
      "nome": "Camila Lima",
      "role": "A Millennial que Desistiu do MELI+",
      "frase": "Paguei R$ 149 pelo MELI+ Mega, mas n√£o consegui vincular a HBO Max por 15 dias.",
      "perfil": {
        "Idade": "31 anos",
        "Localiza√ß√£o": "Curitiba",
        "Fam√≠lia": "Rec√©m-casada, planeja filhos",
        "Renda": "R$ 6.500/m√™s",
        "Servi√ßos": "Ex-MELI+ Total, agora usa Nubank + Amazon Prime + HBO Max separado"
      },
      "comportamento": [
        "Usu√°ria cr√≠tica de servi√ßos digitais",
        "Valoriza conveni√™ncia, streamings e custo-benef√≠cio",
        "Cancelou assinatura por falha t√©cnica"
      ],
      "dores": [
        "Falha na vincula√ß√£o de streamings (52% das men√ß√µes)",
        "Cashback incompat√≠vel com outros benef√≠cios (‚Äún√£o acumula‚Äù)",
        "Suporte lento para problemas digitais (m√©dia de 72h)",
        "Falta de YouTube Premium no pacote"
      ],
      "elogios_valores": {
        "elogios": [],
        "valores": "Conveni√™ncia, funcionamento perfeito, flexibilidade"
      },
      "oportunidades": [
        "‚ÄúMELI+ Flex‚Äù: usu√°rio escolhe 2 ou 3 streamings",
        "Suporte t√©cnico em tempo real via chat para streamings",
        "Integra√ß√£o com YouTube Premium",
        "Cashback ampliado: 5% em compras com streamings ativos"
      ],
      "imagem": "camila_lima.webp"
    }
  ]
};

const container = document.getElementById('slider-container');
const indicatorsContainer = document.getElementById('indicators');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');

let currentIndex = 0;
const totalSlides = data.personas.length;

function renderPersonas() {
    data.personas.forEach((persona, index) => {
        const section = document.createElement('section');
        section.className = 'persona-section';
        section.id = persona.id;

        // Build Profile List
        const perfilList = Object.entries(persona.perfil)
            .map(([key, value]) => `<li><strong>${key}:</strong> ${value}</li>`)
            .join('');

        // Build Lists
        const comportamentoList = persona.comportamento.map(item => `<li>${item}</li>`).join('');
        const doresList = persona.dores.map(item => `<li>${item}</li>`).join('');
        const oportunidadesList = persona.oportunidades.map(item => `<li>${item}</li>`).join('');
        
        // Build Elogios (if any)
        let elogiosHtml = '';
        if (persona.elogios_valores.elogios.length > 0) {
            elogiosHtml = `
                <div class="detail-group">
                    <h4 class="sub-title">O que dizem:</h4>
                    <ul class="detail-list italic-list">
                        ${persona.elogios_valores.elogios.map(e => `<li>${e}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        section.innerHTML = `
            <div class="persona-image-container">
                <img src="${persona.imagem}" alt="${persona.nome}" class="persona-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                <div class="placeholder-text" style="display: none;">
                    <p>Imagem: ${persona.imagem}</p>
                    <p>(Arquivo n√£o encontrado)</p>
                </div>
            </div>
            <div class="persona-content">
                <div class="persona-header">
                    <h1 class="persona-name">${persona.nome}</h1>
                    <h2 class="persona-role">${persona.role}</h2>
                </div>
                
                <div class="persona-quote">
                    <blockquote>"${persona.frase}"</blockquote>
                </div>

                <div class="persona-grid-layout">
                    <!-- Coluna 1: Perfil e Comportamento -->
                    <div class="grid-column">
                        <div class="detail-card">
                            <h3 class="detail-title">üîç Perfil</h3>
                            <ul class="detail-list">
                                ${perfilList}
                            </ul>
                        </div>
                        
                        <div class="detail-card">
                            <h3 class="detail-title">üìà Comportamento Real</h3>
                            <ul class="detail-list">
                                ${comportamentoList}
                            </ul>
                        </div>
                    </div>

                    <!-- Coluna 2: Dores e Oportunidades -->
                    <div class="grid-column">
                        <div class="detail-card warning-card">
                            <h3 class="detail-title">‚ö†Ô∏è Dores Cr√≠ticas</h3>
                            <ul class="detail-list">
                                ${doresList}
                            </ul>
                        </div>

                        <div class="detail-card success-card">
                            <h3 class="detail-title">üéØ Oportunidades</h3>
                            <ul class="detail-list">
                                ${oportunidadesList}
                            </ul>
                        </div>

                        <div class="detail-card">
                            <h3 class="detail-title">üíé Valores</h3>
                            <p class="values-text">${persona.elogios_valores.valores}</p>
                            ${elogiosHtml}
                        </div>
                    </div>
                </div>
            </div>
        `;
        container.appendChild(section);

        // Create indicator
        const indicator = document.createElement('div');
        indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
        indicator.addEventListener('click', () => goToSlide(index));
        indicatorsContainer.appendChild(indicator);
    });
}

function updateSlider() {
    container.style.transform = `translateX(-${currentIndex * 100}%)`;
    
    // Update indicators
    document.querySelectorAll('.indicator').forEach((ind, idx) => {
        if (idx === currentIndex) {
            ind.classList.add('active');
        } else {
            ind.classList.remove('active');
        }
    });

    // Update button states
    prevBtn.disabled = currentIndex === 0;
    prevBtn.style.opacity = currentIndex === 0 ? '0.5' : '1';
    
    nextBtn.disabled = currentIndex === totalSlides - 1;
    nextBtn.style.opacity = currentIndex === totalSlides - 1 ? '0.5' : '1';
}

function goToSlide(index) {
    if (index >= 0 && index < totalSlides) {
        currentIndex = index;
        updateSlider();
    }
}

prevBtn.addEventListener('click', () => {
    if (currentIndex > 0) {
        currentIndex--;
        updateSlider();
    }
});

nextBtn.addEventListener('click', () => {
    if (currentIndex < totalSlides - 1) {
        currentIndex++;
        updateSlider();
    }
});

// Keyboard navigation
document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
        if (currentIndex > 0) {
            currentIndex--;
            updateSlider();
        }
    } else if (e.key === 'ArrowRight') {
        if (currentIndex < totalSlides - 1) {
            currentIndex++;
            updateSlider();
        }
    }
});

// Initialize
renderPersonas();
updateSlider();
