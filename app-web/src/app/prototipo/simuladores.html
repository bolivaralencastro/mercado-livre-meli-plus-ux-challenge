<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Meli+ Simuladores Finais</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <style>
        :root {
            --meli-yellow: #FFF159;
            --meli-purple: #A90F90;
            --meli-dark-purple: #4A004A;
            --meli-green: #00A650;
            --meli-red: #FF4D4D;
            --bg-body: #0F0F11;
            --bg-card: #18181B;
            --bg-surface: #27272A;
            --text-primary: #FFFFFF;
            --text-secondary: #A1A1AA;
            --border: rgba(255,255,255,0.1);
            --radius: 20px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

        body {
            background-color: var(--bg-body);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container { width: 100%; max-width: 1100px; }

        .header { margin-bottom: 40px; text-align: center; }
        .header h1 { font-weight: 800; letter-spacing: -0.05em; font-size: 2rem; margin-bottom: 8px;}
        .header p { color: var(--text-secondary); font-size: 1rem; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
        }

        /* --- CARD SYSTEM --- */
        .sim-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 28px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            height: 520px;
        }

        .card-top { z-index: 1; position: relative; flex: 1; display:flex; flex-direction:column;}
        
        .title-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; margin-top: 8px; }
        .title { font-size: 1.4rem; font-weight: 700; letter-spacing: -0.02em;}
        
        /* Tooltip */
        .tooltip-trigger { color: var(--text-secondary); cursor: help; opacity: 0.6; transition: opacity 0.2s; }
        .tooltip-trigger:hover { opacity: 1; }
        .tooltip-box {
            visibility: hidden; opacity: 0;
            position: absolute; bottom: 100%; right: 0;
            background: rgba(0,0,0,0.95); border: 1px solid var(--border);
            padding: 12px; border-radius: 8px; width: 240px;
            font-size: 0.75rem; color: #fff; line-height: 1.4;
            transition: all 0.2s ease; pointer-events: none; z-index: 20;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .tooltip-trigger:hover .tooltip-box { visibility: visible; opacity: 1; bottom: 120%; }

        .subtitle { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 20px; line-height: 1.5; min-height: 3em; }

        /* --- DISPLAY AREA --- */
        .display-area { 
            text-align: center; margin-top: auto; margin-bottom: auto; 
            background: rgba(255,255,255,0.03); border-radius: 16px; padding: 20px;
            border: 1px dashed rgba(255,255,255,0.1);
        }
        
        .status-badge {
            display: inline-block; padding: 4px 10px; border-radius: 6px;
            font-size: 0.7rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;
        }
        .status-badge.bad { background: rgba(255, 77, 77, 0.2); color: var(--meli-red); }
        .status-badge.neutral { background: rgba(255, 255, 255, 0.1); color: var(--text-secondary); }

        .price-value { font-size: 2.8rem; font-weight: 800; letter-spacing: -0.05em; color: var(--text-primary); font-variant-numeric: tabular-nums; line-height: 1.1;}
        .price-value.danger { color: var(--meli-red); }
        .price-value.neutral { color: var(--text-secondary); opacity: 0.5; }

        /* --- SLIDER --- */
        .slider-area { margin-top: auto; margin-bottom: 24px; position: relative; z-index: 2;}
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; cursor: pointer; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 8px; background: var(--bg-surface); border-radius: 99px; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 28px; width: 28px; border-radius: 50%;
            background: var(--text-primary); margin-top: -10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: transform 0.1s; border: 2px solid var(--bg-card);
        }
        input[type=range]:active::-webkit-slider-thumb { transform: scale(1.2); background: var(--meli-purple); }

        /* --- ICONS --- */
        .icons-row { display: flex; justify-content: center; gap: 12px; margin-top: 12px; height: 32px; }
        .svc-icon {
            width: 32px; height: 32px; border-radius: 6px; background: var(--bg-surface); 
            display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 0.6rem;
            color: var(--text-secondary); opacity: 0.1; transition: all 0.3s ease;
        }
        .svc-icon.active { opacity: 1; color: white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); }
        .svc-icon.active[data-brand="net"] { background: #E50914; }
        .svc-icon.active[data-brand="dis"] { background: #113CCF; }
        .svc-icon.active[data-brand="max"] { background: #002BE7; }
        .svc-icon.active[data-brand="app"] { background: #222; }

        /* --- CTA BUTTON --- */
        .cta-btn {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: var(--text-primary); color: var(--bg-body);
            font-weight: 700; font-size: 1rem; cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            position: relative; z-index: 2;
        }
        .cta-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .cta-btn:active { transform: scale(0.98); }
        .cta-btn:disabled { opacity: 0.3; cursor: not-allowed; transform: none; box-shadow: none; background: var(--bg-surface); color: var(--text-secondary); }

        /* --- REVEAL OVERLAY --- */
        .reveal-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(145deg, #581C96 0%, #2A004F 100%);
            z-index: 10; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 32px; text-align: center;
            transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            color: white;
        }
        .card-revealed .reveal-overlay { transform: translateY(0); }

        .reveal-tag { background: var(--meli-yellow); color: #333; padding: 4px 12px; border-radius: 99px; font-weight: 800; font-size: 0.75rem; margin-bottom: 16px; text-transform: uppercase; }
        .reveal-price { font-size: 3.5rem; font-weight: 800; letter-spacing: -0.05em; line-height: 1; margin-bottom: 8px; white-space: nowrap; }
        .reveal-sub { opacity: 0.8; font-size: 0.9rem; margin-bottom: 24px; }
        
        .savings-badge {
            background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3);
            padding: 12px 20px; border-radius: 12px; width: 100%;
        }
        .savings-label { display: block; font-size: 0.75rem; text-transform: uppercase; opacity: 0.7; margin-bottom: 4px; }
        .savings-value { font-size: 1.5rem; font-weight: 700; color: var(--meli-green); }

        .close-reveal {
            position: absolute; top: 20px; right: 20px;
            background: none; border: none; color: white; opacity: 0.5; cursor: pointer;
        }
        .close-reveal:hover { opacity: 1; }

    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <div style="display:inline-flex; align-items:center; gap:8px; background:rgba(169,15,144,0.2); padding:6px 16px; border-radius:99px; margin-bottom:16px; border:1px solid rgba(169,15,144,0.4);">
                <strong style="color:#EAD4FF;">SIMULADORES</strong>
                <span style="color:white; font-weight:600; font-size:0.9rem;">ANTES vs DEPOIS</span>
            </div>
            <h1>Prove o valor</h1>
            <p>Veja o impacto financeiro da assinatura em 3 cenários.</p>
        </div>

        <div class="grid">

            <!-- 1. STREAMING SIMULATOR -->
            <div class="sim-card" id="card-mega">
                <div class="card-top">
                    <div class="title-row">
                        <h3 class="title">Streaming</h3>
                        <div class="tooltip-trigger">
                            <span class="material-icons-round" style="font-size:18px">info</span>
                            <div class="tooltip-box">
                                <strong>Preços Avulsos:</strong><br>
                                • Netflix Padrão: R$ 44,90<br>
                                • Disney+ Padrão: R$ 43,90<br>
                                • Max Mensal: R$ 39,90<br>
                                • Apple TV+: R$ 21,90
                            </div>
                        </div>
                    </div>
                    <p class="subtitle">Quanto você gasta todo mês pagando assinaturas separadas?</p>

                    <div class="display-area">
                        <span class="status-badge neutral" id="mega-badge">SEM MELI+</span>
                        <div class="price-value neutral" id="mega-display">R$ 0,00</div>
                        <div class="icons-row">
                            <div class="svc-icon" data-brand="net">N</div>
                            <div class="svc-icon" data-brand="dis">D+</div>
                            <div class="svc-icon" data-brand="max">M</div>
                            <div class="svc-icon" data-brand="app">tv+</div>
                        </div>
                    </div>
                </div>

                <div class="slider-area">
                    <input type="range" id="mega-slider" min="0" max="4" step="1" value="0">
                </div>

                <button class="cta-btn" id="mega-btn" onclick="reveal('mega')" disabled>
                    <span class="material-icons-round">bolt</span>
                    Ver preço com Meli+
                </button>

                <div class="reveal-overlay">
                    <button class="close-reveal" onclick="reset('mega')"><span class="material-icons-round">close</span></button>
                    <span class="reveal-tag">COM MELI+ MEGA</span>
                    <div class="reveal-price">R$ 39,90</div>
                    <p class="reveal-sub">4 Streamings + Frete</p>
                    <div class="savings-badge">
                        <span class="savings-label">Sua Economia Mensal</span>
                        <span class="savings-value" id="mega-saving">R$ 0,00</span>
                    </div>
                </div>
            </div>

            <!-- 2. FREIGHT SIMULATOR -->
            <div class="sim-card" id="card-ship">
                <div class="card-top">
                    <div class="title-row">
                        <h3 class="title">Frete</h3>
                        <div class="tooltip-trigger">
                            <span class="material-icons-round" style="font-size:18px">info</span>
                            <div class="tooltip-box">
                                R$ 20,00 é o custo médio estimado de envio para compras abaixo de R$ 79 sem assinatura.
                            </div>
                        </div>
                    </div>
                    <p class="subtitle">Quanto dinheiro você joga fora pagando frete em compras pequenas?</p>

                    <div class="display-area">
                        <span class="status-badge neutral" id="ship-badge">SEM MELI+</span>
                        <div class="price-value neutral" id="ship-display">R$ 0,00</div>
                        <div style="font-size:0.9rem; color:var(--text-secondary); margin-top:8px;">
                            <span id="ship-count">0</span> envios
                        </div>
                    </div>
                </div>

                <div class="slider-area">
                    <input type="range" id="ship-slider" min="0" max="10" step="1" value="0">
                </div>

                <button class="cta-btn" id="ship-btn" onclick="reveal('ship')" disabled>
                    <span class="material-icons-round">local_shipping</span>
                    Ver frete com Meli+
                </button>

                <div class="reveal-overlay">
                    <button class="close-reveal" onclick="reset('ship')"><span class="material-icons-round">close</span></button>
                    <span class="reveal-tag">COM MELI+ TOTAL</span>
                    <div class="reveal-price">R$ 17,90</div>
                    <p class="reveal-sub">Frete Grátis Ilimitado</p>
                    <div class="savings-badge">
                        <span class="savings-label">Economia Real</span>
                        <span class="savings-value" id="ship-saving">R$ 0,00</span>
                    </div>
                </div>
            </div>

            <!-- 3. ROI SIMULATOR -->
            <div class="sim-card" id="card-roi">
                <div class="card-top">
                    <div class="title-row">
                        <h3 class="title">Rendimento</h3>
                        <div class="tooltip-trigger">
                            <span class="material-icons-round" style="font-size:18px">info</span>
                            <div class="tooltip-box">
                                <strong>Cálculo projetado para 1 ano (12 meses):</strong><br>
                                • Poupança: ~6,17% a.a.<br>
                                • Meli+ (120% CDI): ~13,5% a.a.<br>
                                *Considerando taxa CDI atual. Limite de simulação: R$ 10.000.
                            </div>
                        </div>
                    </div>
                    <p class="subtitle">Quanto dinheiro fica parado na sua conta rendendo pouco?</p>

                    <div class="display-area">
                        <span class="status-badge neutral" id="roi-badge">SEM MELI+</span>
                        <div class="price-value neutral" id="roi-poup">+ R$ 0,00</div>
                        <div style="font-size:0.9rem; color:var(--text-secondary); margin-top:8px;">
                            Saldo: <span id="roi-balance" style="color:white; font-weight:700;">R$ 0</span>
                        </div>
                    </div>
                </div>

                <div class="slider-area">
                    <input type="range" id="roi-slider" min="0" max="10000" step="100" value="0">
                </div>

                <button class="cta-btn" id="roi-btn" onclick="reveal('roi')" disabled>
                    <span class="material-icons-round">trending_up</span>
                    Ver ganho com Meli+
                </button>

                <div class="reveal-overlay">
                    <button class="close-reveal" onclick="reset('roi')"><span class="material-icons-round">close</span></button>
                    <span class="reveal-tag">COM MELI+ (120% CDI)</span>
                    <div class="reveal-price" id="roi-meli">R$ 0,00</div>
                    <p class="reveal-sub">+ Mais lucro em 1 ano</p>
                    <div class="savings-badge">
                        <span class="savings-label">Ganho Extra</span>
                        <span class="savings-value" id="roi-gain">+ R$ 0,00</span>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const fmtMoney = (v) => v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        /* --- MEGA LOGIC --- */
        const megaPrices = [44.90, 43.90, 39.90, 21.90]; 
        const megaPromoPrice = 39.90;
        const megaSlider = document.getElementById('mega-slider');
        const megaDisplay = document.getElementById('mega-display');
        const megaIcons = document.querySelectorAll('.svc-icon');
        const megaBtn = document.getElementById('mega-btn');
        const megaSaving = document.getElementById('mega-saving');
        const megaBadge = document.getElementById('mega-badge');

        megaSlider.addEventListener('input', () => {
            reset('mega');
            const count = parseInt(megaSlider.value);
            
            if (count === 0) {
                megaDisplay.textContent = "R$ 0,00";
                megaDisplay.className = "price-value neutral";
                megaBadge.className = "status-badge neutral";
                megaIcons.forEach(icon => icon.classList.remove('active'));
                megaBtn.disabled = true;
                return;
            }

            let total = 0;
            for(let i=0; i<count; i++) total += megaPrices[i];
            
            megaDisplay.textContent = fmtMoney(total);
            megaDisplay.className = "price-value danger";
            megaBadge.className = "status-badge bad";
            megaBtn.disabled = false;
            
            megaIcons.forEach((icon, idx) => {
                icon.classList.toggle('active', idx < count);
            });

            const saving = total - megaPromoPrice;
            if (saving > 0) {
                megaSaving.textContent = fmtMoney(saving);
                megaSaving.style.color = "var(--meli-green)";
            } else {
                megaSaving.textContent = "Mais vantagens";
                megaSaving.style.color = "white";
            }
        });

        /* --- FREIGHT LOGIC (Net Savings Adjustment) --- */
        const shipSlider = document.getElementById('ship-slider');
        const shipDisplay = document.getElementById('ship-display');
        const shipCount = document.getElementById('ship-count');
        const shipBtn = document.getElementById('ship-btn');
        const shipSaving = document.getElementById('ship-saving');
        const shipBadge = document.getElementById('ship-badge');
        const avgFreight = 20.00;
        const meliTotalCost = 17.90;

        shipSlider.addEventListener('input', () => {
            reset('ship');
            const count = parseInt(shipSlider.value);
            
            if (count === 0) {
                shipDisplay.textContent = "R$ 0,00";
                shipDisplay.className = "price-value neutral";
                shipBadge.className = "status-badge neutral";
                shipCount.textContent = "0";
                shipBtn.disabled = true;
                return;
            }

            const totalFreightCost = count * avgFreight;
            shipDisplay.textContent = fmtMoney(totalFreightCost);
            shipDisplay.className = "price-value danger";
            shipBadge.className = "status-badge bad";
            shipCount.textContent = count;
            shipBtn.disabled = false;

            const netSaving = totalFreightCost - meliTotalCost;

            if (netSaving > 0) {
                shipSaving.textContent = fmtMoney(netSaving);
                shipSaving.parentElement.querySelector('.savings-label').textContent = "Economia Real";
                shipSaving.style.color = "var(--meli-green)";
            } else {
                shipSaving.textContent = "Frete Grátis";
                shipSaving.parentElement.querySelector('.savings-label').textContent = "Vantagem";
                shipSaving.style.color = "white";
            }
        });

        /* --- ROI LOGIC (WHITE TEXT FIX) --- */
        const roiSlider = document.getElementById('roi-slider');
        const roiPoup = document.getElementById('roi-poup');
        const roiBalance = document.getElementById('roi-balance');
        const roiBtn = document.getElementById('roi-btn');
        const roiMeliDisplay = document.getElementById('roi-meli');
        const roiGain = document.getElementById('roi-gain');
        const roiBadge = document.getElementById('roi-badge');

        roiSlider.addEventListener('input', () => {
            reset('roi');
            const P = parseInt(roiSlider.value);
            
            if (P === 0) {
                roiPoup.textContent = "+ R$ 0,00";
                roiPoup.className = "price-value neutral";
                roiBadge.className = "status-badge neutral";
                roiBalance.textContent = "R$ 0";
                roiBtn.disabled = true;
                return;
            }

            roiBalance.textContent = fmtMoney(P);
            roiBtn.disabled = false;
            // AQUI ESTÁ A CORREÇÃO: Removemos .neutral para ficar BRANCO
            roiPoup.className = "price-value"; 
            roiBadge.className = "status-badge neutral";

            const ratePoupYear = 0.0617; 
            const rateMeliYear = 0.135; 

            const fvPoup = P * (1 + ratePoupYear);
            const fvMeli = P * (1 + rateMeliYear);

            const gainP = fvPoup - P;
            const gainM = fvMeli - P;
            const extra = gainM - gainP;

            roiPoup.textContent = "+ " + fmtMoney(gainP);
            roiMeliDisplay.textContent = fmtMoney(gainM);
            roiGain.textContent = "+ " + fmtMoney(extra);
        });

        /* --- REVEAL SYSTEM --- */
        function reveal(id) {
            document.getElementById(`card-${id}`).classList.add('card-revealed');
        }

        function reset(id) {
            document.getElementById(`card-${id}`).classList.remove('card-revealed');
        }

    </script>
</body>
</html>